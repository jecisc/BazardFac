<html>
<head>
	<title>Tic - Tac - Toe </title>
	<script type="text/javascript">
	
		var cpt = 0;
		var size = 3;
		var board= new Array(size);
		alert(2*"dix");
		for (i = 0; i< size; i++){
			board[i] = new Array(size);
			for( j = 0; j < size ; j++){
				board[i][j] = 0;
			}
		}
		
		
		
		function xcase(e){
			accept(e);
			isFinished();
		}
		
		function isBusy(e){
			return !(e.getAttribute("src") == "rien.jpg")
		}
		
		function accept(e){
			if (isBusy(e)){
				alert("You can't do that move.");
			}
			else{
				var lig = e.getAttribute("id").charAt(1);
				var col = e.getAttribute("id").charAt(2);
				if (cpt == 0){
					e.setAttribute("src", "rond.jpg");
					board[lig][col]=1;
					cpt = 1;
				}
				else{
					e.setAttribute("src", "croix.jpg");
					board[lig][col]=-1;
					cpt=0;
				}
			}
		}
		
		function isFinished(){
		
			checkForWinner();
		
			if(boardFull()){
				alert("The game is finish ! No winner sorry :(");
				location.reload() ;
			}
		}
		
		function checkForWinner(){
			for(i=0; i<size; i++){
				if (sumLine(i) == size || sumCol(i) == size){
					win();
				}
			}
			if(sumDiag1() == size || sumDiag2() == size){
				win();
			}
		}
		
		function sumDiag1(){
			var res = 0;
			for (i=0; i<size;i++){
					res = res + board[i][i];
			}
			return Math.abs(res);
		}
		
		function sumDiag2(){
			var res = 0;
			for (i=0; i<size;i++){
					res = res + board[i][size -i-1];
			}
			return Math.abs(res);
		}
		
		function sumLine(n){
			var res = 0;
			for(i=0; i<size;i++){
				res = res + board[n][i];
			}
			return Math.abs(res);
		}
		
		function sumCol(n){
			var res = 0;
			for(i=0; i<size;i++){
				res = res + board[i][n];
			}
			return Math.abs(res);
		}
		
		function win(){
			if (cpt=0){
				alert("Player 2 win ! :)");
			}
			else{
				alert("Player 1 win ! :)");
			}
			 location.reload() ;
		}
		
		function boardFull(){
			for (i=0; i<size; i++){
				for(j=0; j<size; j++){
					if(board[i][j]==0){
						return false;
					}
				}
			}
			return true;
		}
		
	</script>
</head>
<body>
	<table border="1">
		<tr>
			<td><img id="c00" src="rien.jpg" onclick="xcase(this)"></img></td>
			<td><img id= "c01"src="rien.jpg" onclick="xcase(this)"></img></td>
			<td><img id="c02" src="rien.jpg" onclick="xcase(this)"></img></td>
		</tr>
		<tr>
			<td><img id="c10" src="rien.jpg" onclick="xcase(this)"></img></td>
			<td><img id="c11"src="rien.jpg" onclick="xcase(this)"></img></td>
			<td><img id="c12" src="rien.jpg" onclick="xcase(this)"></img></td>
		</tr>
		<tr>
			<td><img id="c20" src="rien.jpg" onclick="xcase(this)"></img></td>
			<td><img id="c21" src="rien.jpg" onclick="xcase(this)"></img></td>
			<td><img id="c22" src="rien.jpg" onclick="xcase(this)"></img></td>
		</tr>
	</table>
</body>
</html>